{% assign urlParts = page.url | split: '/' | shift %}
{% assign urlLanguage = urlParts[0] %}
{% assign matchedLanguages = site.data.languages | where: "tag", urlLanguage %}
{% assign activeLanguage = matchedLanguages[0] %}

{% assign relativeUrl = urlParts | shift | join: '/' | replace: '.html', '' %}

<nav class="navbar navbar-static-top navbar-light">
  <div class="container">
    <a href="/en/" class="navbar-brand">Yarn</a>

    <button class="navbar-toggler hidden-lg-up pull-xs-right" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="exCollapsingNavbar2" aria-expanded="false" aria-label="Toggle navigation">
      <!-- &#9776; -->
    </button>

    <div class="collapse navbar-toggleable-md" id="navbar">
      <ul class="nav navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="/en/docs/getting-started">Getting Started</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/en/docs">Documentation</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog">Blog</a>
        </li>
      </ul>

      <ul class="nav navbar-nav pull-lg-right">
        <li class="nav-item dropdown">
          <a id="dropdownNavLanguage" class="nav-link dropdown-toggle"  href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="icon icon-language"></i>
            {{activeLanguage.name}}
          </a>
          <div class="dropdown-menu" aria-labelledby="dropdownNavLanguage">
            {% for language in site.data.languages %}
              <a href="/{{language.tag}}/{{relativeUrl}}"
                class="dropdown-item{% if activeLanguage.tag == language.tag %} active{% endif %}">
                {{language.name}}
              </a>
            {% endfor %}
          </div>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="#">Discord</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Twitter</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">GitHub</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
